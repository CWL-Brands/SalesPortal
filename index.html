<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kanva Botanicals Quote Calculator</title>
    
    <!-- CSS Files -->
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/admin.css">
    <link rel="stylesheet" href="css/hybrid.css">
    
    <!-- Copper CRM SDK -->
    <script src="https://cdn.jsdelivr.net/npm/copper-sdk@latest/dist/copper-sdk.min.js"></script>
</head>
<body>
    <!-- Header -->
    <header class="calculator-header">
        <div class="header-content">
            <div class="logo-section">
                <span class="logo">üåø</span>
                <h1>Kanva Botanicals Quote Calculator</h1>
            </div>
            <p class="tagline">Instantly generate professional quotes with accurate pricing</p>
            <div class="user-info">
                <span id="userDisplay">User: None | Admin: NO</span>
                <button id="adminToggle" onclick="toggleAdminPanel()" class="admin-btn">‚öôÔ∏è</button>
            </div>
        </div>
    </header>

    <!-- Admin Panel -->
    <div id="adminPanel" class="admin-panel" style="display: none;">
        <div class="admin-content">
            <h3>üîê Admin Panel</h3>
            <div id="adminLogin" class="admin-login">
                <input type="password" id="adminPassword" placeholder="Enter admin password">
                <button onclick="loginAdmin()">Login</button>
            </div>
            <div id="adminControls" class="admin-controls" style="display: none;">
                <h4>Product Management</h4>
                <div class="admin-sections">
                    <button onclick="showProductEditor()">Edit Products</button>
                    <button onclick="showShippingEditor()">Edit Shipping Zones</button>
                    <button onclick="showTaxEditor()">Edit Tax Rates</button>
                    <button onclick="exportConfig()">Export Config</button>
                </div>
                <div id="editorContent" class="editor-content"></div>
            </div>
        </div>
    </div>

    <!-- Main Calculator -->
    <main id="mainCalculator" class="calculator-container">
        <div class="calculator-grid">
            <!-- Customer Information -->
            <section class="customer-info">
                <h3>üë§ Customer Information</h3>
                
                <div class="form-group">
                    <label for="quoteName">Quote Name:</label>
                    <input type="text" id="quoteName" placeholder="Product Quote for Company Name">
                </div>
                
                <div class="form-group">
                    <label for="companyName">Company Name:</label>
                    <input type="text" id="companyName" placeholder="ABC Distribution">
                </div>
                
                <div class="form-group">
                    <label for="segment">Customer Segment:</label>
                    <select id="segment">
                        <option value="">Select segment...</option>
                        <option value="smoke and vape shops">Smoke & Vape Shops</option>
                        <option value="convenience stores">Convenience Stores</option>
                        <option value="cannabis dispensaries">Cannabis Dispensaries</option>
                        <option value="wholesale distribution">Wholesale Distribution</option>
                        <option value="retail customers">Retail Customers</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="customerState">State:</label>
                    <select id="customerState" onchange="Calculator.calculateOrder(); updateDisplay();">
                        <option value="ID">ID - Idaho</option>
                        <option value="AL">AL - Alabama</option>
                        <option value="AK">AK - Alaska</option>
                        <option value="AZ">AZ - Arizona</option>
                        <option value="AR">AR - Arkansas</option>
                        <option value="CA">CA - California</option>
                        <option value="CO">CO - Colorado</option>
                        <option value="CT">CT - Connecticut</option>
                        <option value="DE">DE - Delaware</option>
                        <option value="DC">DC - District of Columbia</option>
                        <option value="FL">FL - Florida</option>
                        <option value="GA">GA - Georgia</option>
                        <option value="HI">HI - Hawaii</option>
                        <option value="IL">IL - Illinois</option>
                        <option value="IN">IN - Indiana</option>
                        <option value="IA">IA - Iowa</option>
                        <option value="KS">KS - Kansas</option>
                        <option value="KY">KY - Kentucky</option>
                        <option value="LA">LA - Louisiana</option>
                        <option value="ME">ME - Maine</option>
                        <option value="MD">MD - Maryland</option>
                        <option value="MA">MA - Massachusetts</option>
                        <option value="MI">MI - Michigan</option>
                        <option value="MN">MN - Minnesota</option>
                        <option value="MS">MS - Mississippi</option>
                        <option value="MO">MO - Missouri</option>
                        <option value="MT">MT - Montana</option>
                        <option value="NE">NE - Nebraska</option>
                        <option value="NV">NV - Nevada</option>
                        <option value="NH">NH - New Hampshire</option>
                        <option value="NJ">NJ - New Jersey</option>
                        <option value="NM">NM - New Mexico</option>
                        <option value="NY">NY - New York</option>
                        <option value="NC">NC - North Carolina</option>
                        <option value="ND">ND - North Dakota</option>
                        <option value="OH">OH - Ohio</option>
                        <option value="OK">OK - Oklahoma</option>
                        <option value="OR">OR - Oregon</option>
                        <option value="PA">PA - Pennsylvania</option>
                        <option value="RI">RI - Rhode Island</option>
                        <option value="SC">SC - South Carolina</option>
                        <option value="SD">SD - South Dakota</option>
                        <option value="TN">TN - Tennessee</option>
                        <option value="TX">TX - Texas</option>
                        <option value="UT">UT - Utah</option>
                        <option value="VT">VT - Vermont</option>
                        <option value="VA">VA - Virginia</option>
                        <option value="WA">WA - Washington</option>
                        <option value="WV">WV - West Virginia</option>
                        <option value="WI">WI - Wisconsin</option>
                        <option value="WY">WY - Wyoming</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="emailDomain">Email Domain:</label>
                    <input type="text" id="emailDomain" placeholder="company.com">
                </div>
                
                <div class="form-group">
                    <label for="phone">Phone Number:</label>
                    <input type="tel" id="phone" placeholder="(555) 123-4567">
                </div>
            </section>

            <!-- Product Selection -->
            <section class="product-selection">
                <h3>üì¶ Product & Order Details</h3>
                
                <div class="mode-toggle">
                    <button class="mode-btn active" onclick="setMode('single')">Single Product</button>
                    <button class="mode-btn" onclick="setMode('multiple')">Multiple Products</button>
                </div>
                
                <div id="singleProductMode" class="product-mode">
                    <div class="form-row">
                        <div class="form-group">
                            <label>Primary Product:</label>
                            <select id="primaryProduct" onchange="updateProductInfo()">
                                <optgroup label="Ready-to-Drink Shots">
                                    <option value="focus">Focus+Flow ($4.50)</option>
                                    <option value="release">Release+Relax ($4.50)</option>
                                    <option value="raw">Raw+Releaf ($4.50)</option>
                                    <option value="zoom">Zoom ($3.10)</option>
                                    <option value="mango">Mango ($3.10)</option>
                                </optgroup>
                                <optgroup label="Kratom Powders - Green">
                                    <option value="green20g">Green Kratom 20g ($2.50)</option>
                                    <option value="green60g">Green Kratom 60g ($5.00)</option>
                                    <option value="green120g">Green Kratom 120g ($7.50)</option>
                                    <option value="green250g">Green Kratom 250g ($11.50)</option>
                                    <option value="green1kg">Green Kratom 1kg ($35.00)</option>
                                </optgroup>
                                <optgroup label="Kratom Powders - Red">
                                    <option value="red20g">Red Kratom 20g ($2.50)</option>
                                    <option value="red60g">Red Kratom 60g ($5.00)</option>
                                    <option value="red120g">Red Kratom 120g ($7.50)</option>
                                    <option value="red250g">Red Kratom 250g ($11.50)</option>
                                    <option value="red1kg">Red Kratom 1kg ($35.00)</option>
                                </optgroup>
                                <optgroup label="Kratom Powders - White">
                                    <option value="white20g">White Kratom 20g ($2.50)</option>
                                    <option value="white60g">White Kratom 60g ($5.00)</option>
                                    <option value="white120g">White Kratom 120g ($7.50)</option>
                                    <option value="white250g">White Kratom 250g ($11.50)</option>
                                    <option value="white1kg">White Kratom 1kg ($35.00)</option>
                                </optgroup>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label>Display Boxes:</label>
                            <input type="number" id="displayBoxes" min="0" value="12" onchange="calculateAndUpdate()">
                            <small id="displayBoxInfo">12 boxes = 1 master case</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Master Cases:</label>
                            <input type="number" id="masterCases" min="0" value="1" onchange="calculateAndUpdate()">
                            <small>Auto-updates from display boxes</small>
                        </div>
                        
                        <div class="form-group">
                            <label>Max Retail Price:</label>
                            <input type="text" id="maxRetailPrice" readonly>
                        </div>
                    </div>
                </div>
                
                <div id="multipleProductMode" class="product-mode" style="display: none;">
                    <div id="productList"></div>
                    <button class="add-product-btn" onclick="addProductLine()">+ Add Product</button>
                </div>
            </section>
        </div>

        <!-- Order Calculation -->
        <section class="order-calculation">
            <h3>üìä Order Calculation</h3>
            <div id="calculationResults" class="calculation-results">
                <p class="empty-state">Enter product details to see calculation</p>
            </div>
            
            <div class="shipping-override" style="display: none;">
                <label>
                    <input type="checkbox" id="manualShipping" onchange="toggleManualShipping()">
                    Manual Shipping Override
                </label>
                <input type="number" id="manualShippingAmount" placeholder="Enter shipping amount" style="display: none;">
            </div>
        </section>

        <!-- Action Buttons -->
        <section class="action-buttons">
            <button class="btn btn-primary" onclick="generateEmail()">
                ‚úâÔ∏è Generate Professional Quote Email
            </button>
            <button class="btn btn-secondary" onclick="saveQuoteToCRM()">
                üíæ Save to CRM
            </button>
            <button class="btn btn-tertiary" onclick="createOpportunity()">
                üéØ Create Opportunity
            </button>
        </section>

        <!-- Quick Product Reference -->
        <section class="product-reference">
            <h3>üìã Quick Product Reference</h3>
            <div class="reference-grid">
                <div class="reference-category">
                    <h4>ü•§ 2oz Wellness Shots</h4>
                    <div class="product-list">
                        <div class="product-item">
                            <span class="product-name">Focus+Flow</span>
                            <span class="product-info">$4.50 ‚Üí $9.99 MSRP (54.95% margin)</span>
                        </div>
                        <div class="product-item">
                            <span class="product-name">Release+Relax</span>
                            <span class="product-info">$4.50 ‚Üí $9.99 MSRP (54.95% margin)</span>
                        </div>
                        <div class="product-item">
                            <span class="product-name">Raw+Releaf</span>
                            <span class="product-info">$4.50 ‚Üí $9.99 MSRP (54.95% margin)</span>
                        </div>
                    </div>
                </div>
                
                <div class="reference-category">
                    <h4>‚ö° Energy & Extract Shots</h4>
                    <div class="product-list">
                        <div class="product-item">
                            <span class="product-name">Zoom</span>
                            <span class="product-info">$3.10 ‚Üí $6.99 MSRP (55.65% margin)</span>
                        </div>
                        <div class="product-item">
                            <span class="product-name">Mango</span>
                            <span class="product-info">$3.10 ‚Üí $6.99 MSRP (55.65% margin)</span>
                        </div>
                    </div>
                </div>
                
                <div class="reference-category">
                    <h4>üåø Kratom Powders</h4>
                    <div class="product-list">
                        <div class="product-item">
                            <span class="product-name">20g Bags</span>
                            <span class="product-info">$2.50 ‚Üí $4.99 MSRP (49.90% margin)</span>
                        </div>
                        <div class="product-item">
                            <span class="product-name">60g Bags</span>
                            <span class="product-info">$5.00 ‚Üí $9.99 MSRP (49.95% margin)</span>
                        </div>
                        <div class="product-item">
                            <span class="product-name">120g Bags</span>
                            <span class="product-info">$7.50 ‚Üí $14.99 MSRP (49.97% margin)</span>
                        </div>
                        <div class="product-item">
                            <span class="product-name">250g Bags</span>
                            <span class="product-info">$11.50 ‚Üí $24.99 MSRP (53.98% margin)</span>
                        </div>
                        <div class="product-item">
                            <span class="product-name">1kg Bags</span>
                            <span class="product-info">$35.00 ‚Üí $79.99 MSRP (56.24% margin)</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="reference-footer">
                <p>üöö Free shipping on orders over $2,500 | üì¶ Volume discounts: 5+ cases (10% off), 10+ cases (15% off)</p>
            </div>
        </section>
    </main>

    <!-- JavaScript Files -->
    <script src="js/config.js"></script>
    <script src="js/calculator.js"></script>
    <script src="js/admin.js"></script>
    <script src="js/email-generator.js"></script>
    <script src="js/copper-integration.js"></script>
    <script src="js/multi-product-calculator.js"></script>
    <script src="js/notification-manager.js"></script>
    <script src="js/main.js"></script>
</body>
</html>
